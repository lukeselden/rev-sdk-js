{"version":3,"sources":["../src/index.ts","../src/util.ts","../src/embed/EventBus.ts","../src/Log.ts","../src/embed/WebcastStatus.ts","../src/embed/PlayerStatus.ts","../src/embed/PlaylistLayout.ts","../src/embed/IVbrickTypes.ts","../src/VbrickSDK.ts","../src/embed/auth.ts","../src/embed/VbrickEmbed.ts","../src/embed/VbrickVideoEmbed.ts","../src/embed/VbrickWebcastEmbed.ts","../src/embed/VbrickPlaylistEmbed.ts","../src/Config.ts","../src/embed/index.ts"],"sourcesContent":["/**\n * A javascript SDK for embedding or calling rev APIs\n *\n * @packageDocumentation\n */\n\nimport { embedVideo, embedWebcast, embedPlaylist, PlayerStatus, WebcastStatus, PlaylistLayout } from './embed';\nimport {TokenType} from './VbrickSDK';\n\nexport * from './embed';\nexport * from './VbrickSDK';\n\n\n\n/**\n * @public\n */\nconst revSDK = {\n    embedWebcast,\n    embedVideo,\n    embedPlaylist,\n    TokenType,\n    PlayerStatus,\n    WebcastStatus,\n    PlaylistLayout\n};\n\nexport default revSDK;","/**\n * @internal\n */\nexport function isString (val: any): boolean {\n\treturn Object.prototype.toString.call(val) === '[object String]';\n}\n\n/**\n * @internal\n */\nexport function lookupElement(element: string | HTMLElement): HTMLElement {\n\tconst el: HTMLElement = element instanceof HTMLElement ? element : document.querySelector(element);\n\n\tif(!el) {\n\t\tthrow new Error('Rev SDK Error: Could not resolve element');\n\t}\n\n\treturn el;\n}\n\nexport function getEmbedUrl(baseUrl: string, endpoint: string, params: Record<string, any>) {\n\tconst query = Object.entries(params)\n\t\t.map(([key, value]) =>\n\t\t\t!value ? undefined :\n\t\t\tvalue === true ? key :\n\t\t\t`${key}=${encodeURIComponent(value)}`)\n\t\t.filter(Boolean)\n\t\t.join('&');\n\n\treturn `${baseUrl}${endpoint}?${query}`;\n}","import { VbrickSDKConfig } from \"../VbrickSDK\";\nimport { TVbrickEvent, IListener, TPlayerMethod, TAuthMethods, TWebcastMethod, TVbrickMessages, TPlaylistMethod } from './IVbrickEvents';\n\n// default to 30 second timeout on authentication/SDK communication\nconst DEFAULT_TIMEOUT = 30 * 1000;\n\n/**\n * @internal\n */\nexport class EventBus {\n\tprivate win: Window;\n\tprivate msgListener: (e: MessageEvent) => void;\n\tprivate readonly baseUrl: string;\n\tprivate readonly shouldLog: boolean;\n\tprivate isDestroyed: boolean = false;\n\n\tprivate eventHandlers: { [K in TVbrickEvent]?: Array<IListener<K>> } = {};\n\n\tconstructor(\n\t\tiframe: HTMLIFrameElement,\n\t\tconfig: VbrickSDKConfig\n\t){\n\t\tthis.win = iframe.contentWindow;\n\t\tthis.msgListener = this.handleMessage.bind(this);\n\n\t\tglobalThis.addEventListener('message', this.msgListener);\n\t\tthis.baseUrl = config.baseUrl;\n\t\tthis.shouldLog = !!config.log;\n\t}\n\n\tpublic on<T extends TVbrickEvent>(event: T, fn: IListener<T>) {\n\t\tconst handlers = this.getHandlers(event);\n\t\thandlers.push(fn);\n\n\t\treturn () => this.off(event, fn);\n\t}\n\n\tpublic awaitEvent(event: TVbrickEvent | TVbrickEvent[], failEvent: TVbrickEvent = 'error', timeout: number = DEFAULT_TIMEOUT): Promise<any> {\n\t\tconst events = Array.isArray(event) ? event : [event];\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst handler = (fn: (e: any) => void) => e => {\n\t\t\t\tfn(e);\n\t\t\t\toffHandlers.forEach(h => h());\n\t\t\t};\n\n\t\t\tconst onEvent: any = handler(resolve);\n\t\t\tconst onErr: any = handler(reject);\n\t\t\tconst offHandlers = events.map(evt => this.on(evt, onEvent));\n\n\t\t\tif(failEvent) {\n\t\t\t\toffHandlers.push(this.on(failEvent, onErr));\n\t\t\t}\n\n\t\t\tif(timeout > 0) {\n\t\t\t\tconst timer = setTimeout(() => {\n\t\t\t\t\tif (this.isDestroyed) { return; }\n\t\t\t\t\tonErr(event + ': timeout')\n\t\t\t\t}, timeout);\n\t\t\t\toffHandlers.push(() => clearTimeout(timer));\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic off<T extends TVbrickEvent>(event: T, fn: IListener<T>): void {\n\t\tconst handlers = this.getHandlers(event);\n\t\tconst i = handlers.indexOf(fn);\n\t\tif(i >= 0) {\n\t\t\thandlers.splice(i, 1);\n\t\t}\n\t}\n\n\t/** Posts a message to the embed */\n\tpublic publish(...[event, msg = undefined]: TAuthMethods | TPlayerMethod | TWebcastMethod | TPlaylistMethod): void {\n\t\tthis.shouldLog && console.log('rev client posting message. ', event);\n\t\tthis.win.postMessage({\n\t\t\tapp: 'vbrick',\n\t\t\tevent,\n\t\t\tmsg\n\t\t}, this.baseUrl);\n\t}\n\n\t/** Posts an 'error' message to the embed */\n\tpublic publishError(msg: string) {\n\t\tthis.win.postMessage({\n\t\t\tapp: 'vbrick',\n\t\t\tevent: 'error',\n\t\t\tmsg\n\t\t}, this.baseUrl);\n\t}\n\n\t/** Fires local event handlers */\n\tpublic emitLocalEvent<T extends TVbrickEvent>(event: T, msg: TVbrickMessages[T] = undefined): void {\n\t\tthis.callHandlers(event, msg);\n\t}\n\n\t/** Calls the local 'error' event handlers */\n\tpublic emitLocalError(msg: string, err: any) {\n\t\tthis.callHandlers('error', { msg, err });\n\t}\n\n\tprivate handleMessage(e: MessageEvent): void {\n\t\tconst data = e.data || {};\n\n\t\tif(e.origin !== this.baseUrl ||\n\t\t\tdata.app !== 'vbrick' ||\n\t\t\t!data.event) {\n\t\t\tthis.shouldLog && console.log('rev SDK dropping inbound message. ', e.data);\n\t\t\treturn;\n\t\t}\n\n\t\tconst shouldLog = this.shouldLog && data.event !== 'currentTime';\n\n\t\tshouldLog && console.log('rev SDK inbound message. ', e.data);\n\n\t\tthis.callHandlers(data.event, data.msg);\n\t}\n\n\tprivate callHandlers(event: string, data: any): void {\n\t\tconst handlers = Array.from(this.getHandlers(event));\n\t\thandlers.forEach(h => h(data));\n\t}\n\tprivate getHandlers(event: string): IListener<any>[] {\n\t\tconst h = this.eventHandlers;\n\t\tif(!h[event]) {\n\t\t\th[event] = [];\n\t\t}\n\t\treturn h[event];\n\t}\n\n\tpublic destroy(): void {\n\t\tif (this.isDestroyed) { return; }\n\t\tthis.isDestroyed = true;\n\t\tglobalThis.removeEventListener('message', this.msgListener);\n\t}\n}\n","import { VbrickSDKConfig } from \"./VbrickSDK\";\n\nexport interface ILogger {\n\tlog(message?: any, ...optionalParams: any[]): void;\n\terror(message?: any, ...optionalParams: any[]): void;\n}\n\nexport function getLogger(cfg: VbrickSDKConfig): ILogger {\n\treturn cfg.log ? console : {\n/**\n * @internal\n */\n\t\tlog: noop,\n\t\terror: noop\n\t};\n}\n\nfunction noop (){}\n","/**\n * @public\n */\nexport enum WebcastStatus {\n\t/**\n\t * Embedded webcast is authenticating\n\t */\n\tLoading = 'Loading',\n\t/**\n\t * Embedded webcast is authenticated and waiting for webcast to start\n\t */\n\tScheduled = 'Scheduled',\n\t/**\n\t * Webcast is active (but not currently Broadcasting)\n\t */\n\tInProgress = 'InProgress',\n\t/**\n\t * Webcast is active with video stream\n\t */\n\tBroadcasting = 'Broadcasting',\n\t/**\n\t * Webcast has ended\n\t */\n\tCompleted = 'Completed',\n\t/**\n\t * Fatal error embedding webcast\n\t */\n\tError = 'Error'\n}\n","/**\n * @public\n */\nexport enum PlayerStatus {\n\tInitializing = 'Initializing',\n\tPlaying = 'Playing',\n\tPaused = 'Paused',\n\tBuffering = 'Buffering',\n\tSeeking = 'Seeking',\n\tEnded = 'Ended',\n\tError = 'Error'\n}\n","/**\n * @public\n */\nexport enum PlaylistLayout {\n    Filmstrip = 'row',\n    Grid = 'grid',\n    Slider = 'slider'\n}","import { WebcastStatus } from './WebcastStatus';\n\n//#endregion internal\n/**\n * The current subtitles language and if enabled or not\n * @public\n */\n\nexport interface ISubtitles {\n\tlanguage?: string;\n\tenabled: boolean;\n}\n/**\n * Basic metadata shared between VOD and Webcast Embeds\n * @public\n */\n\nexport interface IBasicInfo {\n\ttitle: string;\n\tisLive: boolean;\n\tsubtitles: Array<{ language: string; }>;\n}\n/**\n * Video Metadata\n * @public\n */\n\nexport interface IVideoInfo extends IBasicInfo {\n\tvideoId: string;\n\ttitle: string;\n\tstatus: string;\n\tduration: number;\n\tisLive: boolean;\n\tis360: boolean;\n\thasAudioOnly: boolean;\n\tsubtitles: Array<{ language: string; }>;\n\tchapters: Array<{\n\t\ttime: number;\n\t\timageId?: string;\n\t\textension?: string;\n\t\ttitle?: string;\n\t}>;\n\tplaybacks: Array<{\n\t\tid: string;\n\t\tlabel: string;\n\t\tstreamDeliveryType: string;\n\t\tzoneName?: string;\n\t\tdeviceName?: string;\n\t}>;\n}\n\n/**\n * video sidebar button\n * @public\n */\nexport enum VideoPlaybackSidebarButton {\n\tAI = 'ai',\n\tCHAPTERS = 'chapters',\n\tCOMMENTS = 'comments',\n\tINFO = 'info',\n\tPLAYLIST = 'playlist',\n\tPULSE = 'pulse',\n\tREPORTS = 'reports',\n\tSHARE = 'share'\n}\n\n/**\n * Event indicating the current webcast status\n * @public\n */\n\nexport type IWebcastStatusMessage<T extends WebcastStatus = WebcastStatus> = {\n\tstatus: T;\n\tisPreProduction?: boolean;\n};\n/**\n * Webcast Metadata\n * @public\n */\n\nexport interface IWebcastInfo extends IBasicInfo {\n\twebcastId: string;\n\ttitle: string;\n\tstartDate: string;\n\tendDate: string;\n\tsubtitles: Array<{ language: string; }>;\n\tlinkedVideoId?: string;\n\tisLive: boolean;\n\tisPreProduction?: boolean;\n}\n/**\n * Fired when a new comment has been added to Chat\n * @public\n */\n\nexport interface IComment {\n\tcomment: string;\n\tdate: string;\n\tuserId: string;\n\tfirstname?: string;\n\tlastname?: string;\n}\n/**\n * Details of the current slide on a Webcast slide change event\n * @public\n */\n\nexport interface ISlideEvent {\n\tslideNumber: number;\n\tslideDelay: number;\n}\n/**\n * Details of a Webcast Poll\n * @public\n */\n\nexport interface IPoll {\n\t// pollClosed only has pollId\n\tpollId: string;\n\tquestion: string;\n\t// count only for poll published\n\tanswers: Array<{ text: string; count?: number; }>;\n\tmultipleChoice: boolean;\n\t// only for poll published\n\ttotalResponses?: number;\n}\n/**\n * The Webcast Poll that has been Closed/Unpublished\n * @public\n */\n\nexport type TPollId = {\n\tpollId: string;\n};\n/**\n * Details of if Video and/or Slides are currently displayed\n * @public\n */\n\nexport interface IWebcastLayout {\n\tvideo?: boolean;\n\tpresentation?: boolean;\n}\n\n/**\n * @internal\n */\nexport interface IPlaylistSwitch {\n\tvideoId: string;\n\tautoplay?: boolean;\n}\n\n/**\n * Video entry in playlist\n * @public\n */\nexport interface IPlaylistItem {\n\tid: string;\n\ttitle: string;\n\townerProfileImageUri: string | null;\n\townerFullName: string;\n}\n\n/**\n * Playlist data emitted when playlist first loaded\n * @public\n */\nexport interface IPlaylistInfo {\n\tid: string;\n\tname: string;\n\tvideos: IPlaylistItem[];\n}\n","\n/**\n * @public\n */\nexport enum TokenType {\n\tJWT = 'JWT',\n\tACCESS_TOKEN = 'AccessToken',\n\tGUEST_REGISTRATION = 'GuestRegistration'\n}\n\n/**\n * @public\n */\nexport interface VbrickSDKToken {\n\ttype: TokenType;\n\n\t/**\n\t * String containing the token value\n\t */\n\tvalue: string;\n\n\t/**\n\t * The issuer for the token\n\t */\n\tissuer: string;\n}\n\n/**\n * @public\n */\nexport interface VbrickSDKConfig {\n\t/**\n\t * URL for Rev\n\t */\n\tbaseUrl: string;\n\n\t/**\n\t * Token for authentication\n\t */\n\ttoken?: VbrickSDKToken;\n\n\t/**\n\t * If true, sdk will log to console\n\t */\n\tlog?: boolean;\n}\n","import { VbrickSDKConfig } from \"../VbrickSDK\";\n\nexport function authenticateAccessToken(config: VbrickSDKConfig): Promise<any> {\n\treturn Promise.resolve({\n\t\taccessToken: config.token?.value\n\t});\n}\n\nexport function authenticateGuestToken(webcastId: string, config: VbrickSDKConfig): Promise<any> {\n\tconst issuer = config.token.issuer;\n\tconst token = config.token.value;\n\n\treturn fetch(`${config.baseUrl}/external/auth/jwt/${webcastId}`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'x-requested-with': 'xmlhttprequest'\n\t\t},\n\t\tbody: `{\n\t\t\t\t\"token\": \"${issuer} ${token}\"\n\t\t\t}`\n\t})\n\t\t.then(response => {\n\t\t\tif (!response.ok) {\n\t\t\t\treturn Promise.reject('Unable to authenticate jwt');\n\t\t\t}\n\t\t\treturn response.json();\n\t\t})\n\t\t.then(response => ({\n\t\t\t...response,\n\t\t\tissuer\n\t\t}));\n}\n\nexport function authenticateJWT(config: VbrickSDKConfig): Promise<any> {\n\tconst issuer = config.token.issuer;\n\tconst jwt = config.token.value;\n\n\tconst url = new URL('/api/v2/jwtauthenticate', config.baseUrl);\n\turl.searchParams.set('jwt_token', jwt);\n\n\treturn fetch(`${url}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\t'Accept': 'application/json',\n\t\t\t'x-requested-with': 'xmlhttprequest'\n\t\t}\n\t})\n\t\t.then(response => {\n\t\t\tif (!response.ok) {\n\t\t\t\treturn Promise.reject('Unable to authenticate jwt');\n\t\t\t}\n\t\t\treturn response.json();\n\t\t})\n\t\t.then(response => ({\n\t\t\t...response,\n\t\t\tissuer\n\t\t}));\n}\n","import { EventBus } from './EventBus';\nimport { VbrickEmbedConfig } from './VbrickEmbedConfig';\nimport { getLogger, ILogger } from '../Log';\nimport { IVbrickBaseEmbed, PlayerStatus } from './IVbrickApi';\nimport { TokenType, VbrickSDKToken } from '../VbrickSDK';\nimport { TVbrickEvent, IListener } from './IVbrickEvents';\nimport { IBasicInfo, ISubtitles } from './IVbrickTypes';\nimport { authenticateAccessToken, authenticateJWT } from './auth';\n\n/**\n * Base class for embedded content.\n */\nexport abstract class VbrickEmbed<TInfo extends IBasicInfo> implements IVbrickBaseEmbed<TInfo> {\n\n\t/**\n\t* video playing, buffering, etc\n\t*/\n\tpublic get playerStatus(): PlayerStatus {\n\t\treturn this._playerStatus;\n\t}\n\tprivate _playerStatus = PlayerStatus.Initializing;\n\n\t/**\n\t* Player Volume. 0-1\n\t*/\n\tpublic get volume(): number {\n\t\treturn this._volume;\n\t}\n\tprivate _volume: number;\n\n\t/**\n\t * Whether subtitles are enabled, and selected language\n\t */\n\tpublic get currentSubtitles(): ISubtitles {\n\t\treturn this._currentSubtitles;\n\t}\n\tprivate _currentSubtitles: ISubtitles = { enabled: false };\n\n\tpublic get isLive(): boolean {\n\t\treturn !!this.info?.isLive;\n\t}\n\n\tpublic get info(): TInfo | undefined {\n\t\treturn this._info as TInfo;\n\t}\n\tprivate _info?: TInfo;\n\n\tprotected iframe: HTMLIFrameElement;\n\tprotected readonly iframeUrl: string;\n\tprotected eventBus: EventBus;\n\tprivate init?: Promise<any>;\n\tprivate unsubscribes: Array<() => void>;\n\tprotected logger: ILogger;\n\n\tconstructor(\n\t\tid: string,\n\t\tprotected readonly config: VbrickEmbedConfig,\n\t\tprotected readonly container: HTMLElement\n\t) {\n\t\tthis.iframeUrl = this.getEmbedUrl(id, this.config);\n\t\tthis.logger = getLogger(this.config);\n\t}\n\n\t/**\n\t * Plays the video if it is paused.\n\t */\n\t public play(): void {\n\t\tthis.eventBus.publish('playVideo');\n\t}\n\t/**\n\t  * Pauses the video if it is playing.\n\t  */\n\tpublic pause(): void {\n\t\tthis.eventBus.publish('pauseVideo');\n\t}\n\n\t/**\n\t * Sets player volume\n\t * @param volume {number} 0-1\n\t */\n\tpublic setVolume(volume: number): void {\n\t\tthis.eventBus.publish('setVolume', { volume });\n\t}\n\n\t/**\n\t * update the current subtitles settings\n\t * @param subtitles enable/disable subtitles and set language (leave language blank to use closed captions encoded into video stream)\n\t */\n\tpublic setSubtitles(subtitles: ISubtitles) {\n\t\tthis.eventBus.publish('setSubtitles', subtitles);\n\t}\n\n\t/**\n\t * Indicates the embedded content was initialized and authenticated.\n\t * If there was a problem loading the content, or a problem with the token, the promise will be rejected.\n\t */\n\tpublic initialize(): Promise<void> {\n\t\tif (this.init) {\n\t\t\treturn this.init;\n\t\t}\n\t\tthis.iframe = this.render();\n\t\tthis.eventBus = new EventBus(this.iframe, this.config);\n\t\tthis.initializeEmbed();\n\n\t\tconst timeout = (this.config.timeoutSeconds! * 1000) || undefined;\n\n\t\treturn this.init = Promise.all([\n\t\t\tthis.initializeToken(),\n\t\t\tthis.eventBus.awaitEvent('load', 'error', timeout)\n\t\t])\n\t\t\t.then(([token]) => {\n\t\t\t\tif (!token) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.logger.log('embed loaded, authenticating');\n\t\t\t\tthis.eventBus.publish('authenticated', { token });\n\t\t\t\tthis.eventBus.awaitEvent('authChanged', 'error', timeout);\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tthis._playerStatus = PlayerStatus.Error;\n\t\t\t\tthis.logger.error('Embed initialization error: ', err);\n\t\t\t\tthis.eventBus.publishError('initializationFailed');\n\t\t\t\tthis.eventBus.emitLocalError('Error loading embed content', err);\n\t\t\t\treturn Promise.reject(err);\n\t\t\t});\n\t}\n\n\tprotected initializeToken(): Promise<any> {\n\t\tif (!this.config.token) {\n\t\t\treturn Promise.resolve()\n\t\t}\n\n\t\tswitch (this.config.token.type) {\n\t\t\tcase TokenType.ACCESS_TOKEN:\n\t\t\t\treturn authenticateAccessToken(this.config);\n\t\t\tcase TokenType.JWT:\n\t\t\t\treturn authenticateJWT(this.config);\n\t\t\tdefault:\n\t\t\t\treturn Promise.reject('Unsupported token type');\n\t\t}\n\t}\n\tprotected initializeEmbed(): void {\n\t\tthis.eventBus.on('videoLoaded', (e: any) => {\n\t\t\tthis._info = e;\n\t\t\tthis._playerStatus = PlayerStatus.Paused;\n\t\t});\n\t\t//don't include status in information, since it can change\n\t\tthis.eventBus.on('webcastLoaded', ({status, ...info}: any) => {\n\t\t\tthis._info = info;\n\t\t});\n\n\t\tthis.eventBus.on('playerStatusChanged', e => this._playerStatus = e.status);\n\t\tthis.eventBus.on('subtitlesChanged', subtitles => {\n\t\t\tthis._currentSubtitles = subtitles;\n\t\t});\n\n\t\t// allow setting volume on player ready\n\t\tif (this.config.initialVolume != undefined && isFinite(this.config.initialVolume)) {\n\t\t\tconst volumeCallback: IListener<'playerStatusChanged'> = (evt) => {\n\t\t\t\tif (evt.status !== PlayerStatus.Playing) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.eventBus.off('playerStatusChanged', volumeCallback);\n\t\t\t\tthis.setVolume(this.config.initialVolume);\n\t\t\t};\n\t\t\tthis.eventBus.on('playerStatusChanged', volumeCallback);\n\t\t}\n\t}\n\tprotected abstract getEmbedUrl(id: string, config: VbrickEmbedConfig);\n\n\tpublic on<T extends TVbrickEvent>(event: T, listener: IListener<T>): void {\n\t\t//ensure internal updates take effect before calling client handlers\n\t\tthis.eventBus.on<any>(event, (e: any) => setTimeout(() => listener(e)));\n\t}\n\n\tpublic off<T extends TVbrickEvent>(event: T, listener: IListener<T>): void {\n\t\tthis.eventBus.off(event, listener);\n\t}\n\n\tprivate render(): HTMLIFrameElement {\n\t\tconst iframe = document.createElement('iframe');\n\t\tiframe.setAttribute('frameborder', '0');\n\t\tiframe.setAttribute('allowFullScreen', '')\n\t\tiframe.allow = 'autoplay';\n\t\tiframe.width = this.config.width || '100%';\n\t\tiframe.height = this.config.height || '100%';\n\t\tiframe.src = this.iframeUrl;\n\n\t\tif (this.config.className) {\n\t\t\tiframe.className = this.config.className;\n\t\t}\n\n\t\tthis.container.appendChild(iframe);\n\n\t\treturn iframe;\n\t}\n\n\tpublic destroy(): void {\n\t\tthis.iframe.remove();\n\t\tthis.eventBus.destroy();\n\t\tthis.init = undefined;\n\t\tthis.unsubscribes?.forEach(fn => fn());\n\t}\n\n\tpublic async updateToken(newToken: VbrickSDKToken): Promise<void> {\n\t\tthis.config.token = newToken;\n\t\ttry {\n\t\t\tconst token = await this.initializeToken();\n\t\t\tthis.eventBus.publish('authChanged', { token });\n\t\t\tawait this.eventBus.awaitEvent('authChanged', 'error');\n\t\t} catch (error) {\n\t\t\tthis.logger.error('Error updating token: ', error);\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n\n/**\n * parses a config object and converts into query parameters for the iframe embed URL\n * @param config\n */\n export function getEmbedQuery(config: VbrickEmbedConfig): Record<string, undefined | boolean | string | number> {\n\treturn {\n\t\ttk: !!config.token,\n\t\tpopupAuth: (config.popupAuth != undefined)\n\t\t\t/* popupAuth requires a \"true\" value if set */\n\t\t\t? (!!config.popupAuth).toString()\n\t\t\t: undefined,\n\t\taccent: config.accentColor ?? config.accent,\n\t\tautoplay: config.autoplay,\n\t\tdefaultTheme: config.applyDefaultTheme,\n\t\tdefaultSidebar: config.defaultSidebar,\n\t\tfullPlayer: config.showFullPlayer,\n\t\tmobileLayoutBreakPoint: config.mobileLayoutBreakPoint,\n\t\tforceClosedCaptions: config.forcedCaptions ?? config.forceClosedCaptions,\n\t\tloopVideo: config.playInLoop ?? config.loopVideo,\n\t\tnoCc: config.hideSubtitles ?? config.noCc,\n\t\tnoCenterButtons: config.hideOverlayControls ?? config.noCenterButtons,\n\t\tnoChapters: config.hideChapters ?? config.noChapters,\n\t\tnoFullscreen: config.hideFullscreen ?? config.noFullscreen,\n\t\tnoPlayBar: config.hidePlayControls ?? config.noPlayBar,\n\t\tnoSettings: config.hideSettings ?? config.noSettings,\n\t\tsidebarFilterQuery: config.sidebarFilterQuery,\n\t\tstartAt: config.startAt\n\t};\n}\n","import { getEmbedUrl } from '../util';\nimport { IVbrickVideoEmbed } from './IVbrickApi';\nimport { IVideoInfo } from \"./IVbrickTypes\";\nimport { getEmbedQuery, VbrickEmbed } from './VbrickEmbed';\nimport { VbrickEmbedConfig, VbrickVideoEmbedConfig } from './VbrickEmbedConfig';\n\n/**\n * Internal class used to model an embedded video\n */\nexport class VbrickVideoEmbed extends VbrickEmbed<IVideoInfo> implements IVbrickVideoEmbed {\n\n\t/**\n\t * Current position in video in seconds\n\t */\n\tpublic get currentTime(): number {\n\t\treturn this._currentTime;\n\t}\n\tprivate _currentTime: number;\n\n\t/**\n\t * Duration of video in seconds. Will be undefined for live content\n\t */\n\tpublic get duration(): number | undefined {\n\t\treturn this.info?.duration;\n\t}\n\n\t/**\n\t * Contains metadata for the video\n\t * @deprecated Use `info` instead\n\t */\n\tpublic get videoInfo(): IVideoInfo | undefined {\n\t\treturn this.info;\n\t}\n\n\tconstructor(\n\t\tid: string,\n\t\tconfig: VbrickVideoEmbedConfig,\n\t\tcontainer: HTMLElement\n\t) {\n\t\tsuper(id, config, container);\n\t}\n\n\t/**\n\t * sets playback rate \n\t * @param speed {number} 0-16, default is 1\n\t */\n\tpublic setPlaybackSpeed(speed: number): void {\n\t\tif (this.isLive) {\n\t\t\tthis.logger.log('Live video, cannot change speed');\n\t\t\treturn;\n\t\t}\n\t\tthis.eventBus.publish('setPlaybackSpeed', { speed });\n\t}\n\n\t/**\n\t * sets the current time in the video\n\t * @param currentTime {number} 0 - video duration\n\t */\n\tpublic seek(currentTime: number) {\n\t\tif (this.isLive) {\n\t\t\tthis.logger.log('Live video, seek');\n\t\t\treturn;\n\t\t}\n\t\tthis.eventBus.publish('seek', { currentTime });\n\t}\n\n\tprotected initializeEmbed(): void {\n\t\tsuper.initializeEmbed();\n\t\tthis.eventBus.on('currentTime', e => {\n\t\t\tthis._currentTime = e.currentTime;\n\t\t\t// update duration in videoInfo?\n\t\t});\n\t}\n\tprotected getEmbedUrl(id: string, config: VbrickEmbedConfig): string {\n\t\treturn getEmbedUrl(config.baseUrl, '/embed', {\n\t\t\tid,\n\t\t\t...getEmbedQuery(config)\n\t\t});\n\t}\n}\n","import { TokenType, VbrickSDKToken } from '../VbrickSDK';\nimport { IVbrickWebcastEmbed, WebcastStatus } from './IVbrickApi';\nimport { authenticateGuestToken } from './auth';\nimport { VbrickEmbedConfig, VbrickWebcastEmbedConfig } from './VbrickEmbedConfig';\nimport { getEmbedUrl } from '../util';\nimport { IWebcastInfo, IWebcastLayout } from \"./IVbrickTypes\";\nimport { getEmbedQuery, VbrickEmbed } from './VbrickEmbed';\n\nfunction isFullWebcastEnabled(config: VbrickWebcastEmbedConfig) {\n\treturn config.showFullWebcast ?? config.enableFullRev;\n}\n\nexport class VbrickWebcastEmbed extends VbrickEmbed<IWebcastInfo> implements IVbrickWebcastEmbed {\n\n\tpublic get webcastStatus() {\n\t\treturn this._webcastStatus;\n\t};\n\tprivate _webcastStatus: WebcastStatus = WebcastStatus.Loading;\n\t\n\tconstructor(\n\t\tprivate readonly webcastId: string,\n\t\tconfig: VbrickWebcastEmbedConfig,\n\t\tcontainer: HTMLElement\n\t) {\n\t\tsuper(webcastId, config, container);\n\t}\n\n\tprotected initializeToken(): Promise<VbrickSDKToken> {\n\t\tconst {type, issuer} = this.config.token ?? {};\n\n\t\tif (type === TokenType.GUEST_REGISTRATION || (type === TokenType.JWT && issuer === 'vbrick_rev')) {\n\t\t\treturn authenticateGuestToken(this.webcastId, this.config);\n\t\t}\n\n\t\treturn super.initializeToken();\n\t}\n\n\tprotected async initializeEmbed(): Promise<void> {\n\t\tsuper.initializeEmbed();\n\n\t\t(<const>['webcastStarted', 'broadcastStarted', 'broadcastStopped', 'webcastEnded']).forEach(event => {\n\t\t\tthis.eventBus.on(event, data => this._webcastStatus = data.status);\n\t\t});\n\n\t\tthis.eventBus.on('webcastLoaded', e => {\n\t\t\tthis._webcastStatus = e.status;\n\t\t\t// start initially with hidden slides\n\t\t\tif (isFullWebcastEnabled(this.config)) {\n\t\t\t\tthis.updateLayout({ video: true, presentation: false });\n\t\t\t}\n\t\t});\n\t\t// if a webcast is completed it may redirect to a recoreded version of it\n\t\tthis.eventBus.on('videoLoaded', () => {\n\t\t\tthis._webcastStatus = WebcastStatus.Completed;\n\t\t});\n\t}\n\n\tpublic updateLayout(layout: IWebcastLayout) {\n\t\tthis.eventBus.publish('updateLayout', layout);\n\t}\n\tprotected getEmbedUrl(id: string, config: VbrickEmbedConfig): string {\n\t\treturn getEmbedUrl(config.baseUrl, `/embed/webcast/${id}`, {\n\t\t\tenableFullRev: isFullWebcastEnabled(config),\n\t\t\t...getEmbedQuery(config)\n\t\t});\n\t}\n}\n","import { getEmbedUrl } from \"../util\";\nimport {VbrickVideoEmbed} from \"./VbrickVideoEmbed\";\nimport {IPlaylistInfo, IVbrickPlaylistEmbed} from \"./IVbrickApi\"\nimport { VbrickPlaylistEmbedConfig } from \"./VbrickEmbedConfig\";\nimport { getEmbedQuery } from \"./VbrickEmbed\";\n\nexport class VbrickPlaylistEmbed extends VbrickVideoEmbed implements IVbrickPlaylistEmbed {\n    public get playlist(): IPlaylistInfo {\n        return this._playlist;\n    }\n    private _playlist: IPlaylistInfo;\n\n    public get currentIndex(): number {\n        return this._index;\n    }\n    private _index: number = 0;\n\n    constructor(\n        id: string,\n        config: VbrickPlaylistEmbedConfig,\n        container: HTMLElement\n    ) {\n        super(id, config, container);\n    }\n\n    protected initializeEmbed(): void {\n        super.initializeEmbed();\n        this.eventBus.on('playlistLoaded', playlist => {\n            this._playlist = playlist;\n            if (this.info?.videoId) {\n                this._index = getPlaylistIndex(this.playlist, this.info?.videoId) ?? 0;\n            }\n        });\n        this.eventBus.on('videoLoaded', video => {\n            // older versions of Rev do not support playlistLoaded event\n            if (!this.playlist?.videos) { return; }\n            this._index = getPlaylistIndex(this.playlist, video.videoId) ?? 0;\n            this.eventBus.emitLocalEvent('playlistItem', {\n                index: this._index,\n                videoId: this.playlist.videos[this._index].id\n            });\n        });\n    }\n\n    public previous() {\n        const vid = wrapAt(this.playlist.videos, this._index - 1);\n        this.switchVideo(vid.id, true);\n    }\n\n    public next() {\n        const vid = wrapAt(this.playlist.videos, this._index + 1);\n        this.switchVideo(vid.id, true);\n    }\n\n    switchVideo(videoId?: string, autoplay?: boolean | undefined): void {\n        this.eventBus.publish('switchVideo', { videoId, autoplay });\n    }\n\n    protected getEmbedUrl(id: string, config: VbrickPlaylistEmbedConfig): string {\n        return getEmbedUrl(config.baseUrl, '/embed', {\n            playlist: id,\n            layout: config.layout,\n            noToolbar: config.hideToolbar,\n            maxRow: config.videosPerRow,\n            maxVideos: config.maxVideos,\n            ...getEmbedQuery(config)\n        });\n    }\n}\n\n/**\n * get index of the specified video within a playlist\n * @param playlist\n * @param videoId\n * @returns\n */\nfunction getPlaylistIndex(playlist: IPlaylistInfo, videoId: string): number | undefined {\n    const idx = playlist.videos.findIndex(({ id }) => id === videoId);\n    return idx >= 0 ? idx : undefined;\n}\n\n/**\n * get item at index, but wrap around at edges\n * @param arr\n * @param i\n * @returns\n */\nfunction wrapAt<T>(arr: T[], i: number): T {\n    const n = arr.length;\n\treturn arr[((i % n) + n) % n];\n}","import { VbrickSDKConfig } from './VbrickSDK';\n\nexport function resolveConfig<TConfig extends VbrickSDKConfig>(configuration: TConfig): TConfig {\n\tconst cfg = {\n\t\t...configuration\n\t};\n\tvalidateConfig(cfg);\n\treturn cfg;\n}\n\nfunction validateConfig(cfg: VbrickSDKConfig): void {\n\tif(!cfg.baseUrl?.match(/^https?:\\/\\//)) {\n\t\tthrow new Error('Rev SDK Error: baseUrl invalid');\n\t}\n\tcfg.baseUrl = new URL(cfg.baseUrl).origin;\n}\n","import type { IVbrickPlaylistEmbed, IVbrickVideoEmbed, IVbrickWebcastEmbed } from './IVbrickApi';\nimport type { VbrickPlaylistEmbedConfig, VbrickVideoEmbedConfig, VbrickWebcastEmbedConfig } from './VbrickEmbedConfig';\nimport { VbrickVideoEmbed } from './VbrickVideoEmbed';\nimport { VbrickWebcastEmbed } from './VbrickWebcastEmbed';\nimport { VbrickPlaylistEmbed } from './VbrickPlaylistEmbed';\nimport { lookupElement } from '../util';\nimport { resolveConfig } from '../Config';\n\nexport * from './IVbrickApi';\nexport * from './VbrickEmbedConfig';\n\n/**\n * Embed a VOD/video on a page, with optional token-based authentication. Returns a VbrickEmbed object for interacting with playback and receiving events.\n * @public\n * @param element - Container element where the embed content will be rendered. Either an HTMLElement or a CSS Selector string.\n * @param videoId - ID of the video to embed\n * @param config - A configuration object\n * @returns An {@link IVbrickVideoEmbed} object\n */\nexport function embedVideo(\n\telement: HTMLElement | string,\n\tvideoId: string,\n\tconfig: VbrickVideoEmbedConfig\n): IVbrickVideoEmbed {\n\tconst el = lookupElement(element);\n\tconst cfg = resolveConfig(config);\n\n\tconst video = new VbrickVideoEmbed(videoId, cfg, el);\n\tvideo.initialize().catch(() => {});\n\treturn video;\n}\n\n\n/**\n * Embeds a webcast on the page\n * @public\n * @param element - Either a CSS selector string or HTML Element where the embed content will be rendered\n * @param webcastId - ID of the webcast to embed\n * @param config - A configuration object\n * @returns An {@link IVbrickWebcastEmbed} object\n *\n * @example\n * Embedding a webcast:\n * ```\n * //In HTML:  <div id=\"webcast-embed\"></div>\n *\n * const webcastId = '0d252797-6db7-44dc-aced-25a6843d529c';\n * revSdk.embedWebcast('#webcast-embed', webcastId, {\n *     showVideo: true,\n *     token\n * });\n * ```\n *\n */\nexport function embedWebcast(\n\telement: HTMLElement | string,\n\twebcastId: string,\n\tconfig: VbrickWebcastEmbedConfig\n): IVbrickWebcastEmbed {\n\n\tconst el = lookupElement(element);\n\tconst cfg = resolveConfig(config);\n\n\tconst webcast = new VbrickWebcastEmbed(webcastId, cfg, el);\n\twebcast.initialize().catch(() => {});\n\treturn webcast;\n}\n\n/**\n * Embeds a playlist on the page\n * @public\n * @param element - Either a CSS selector string or HTML Element where the embed content will be rendered\n * @param playlistId - ID of the playlist to embed\n * @param config - A configuration object\n * @returns An {@link IVbrickPlaylistEmbed} object\n *\n * @example\n * Embedding a playlist:\n * ```\n * //In HTML:  <div id=\"playlist-embed\"></div>\n *\n * const playlistId = '0d252797-6db7-44dc-aced-25a6843d529c';\n * revSdk.embedPlaylist('#playlist-embed', playlistId, {\n *     autoplay: true,\n *     token\n * });\n * ```\n *\n */\nexport function embedPlaylist(\n\telement: HTMLElement | string,\n\tplaylistId: string,\n\tconfig: VbrickPlaylistEmbedConfig\n): IVbrickPlaylistEmbed {\n\n\tconst el = lookupElement(element);\n\tconst cfg = resolveConfig(config);\n\n\tconst player = new VbrickPlaylistEmbed(playlistId, cfg, el);\n\tplayer.initialize().catch(() => {});\n\treturn player;\n}\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACUO,WAAS,cAAc,SAA4C;AACzE,UAAM,KAAkB,mBAAmB,cAAc,UAAU,SAAS,cAAc,OAAO;AAEjG,QAAG,CAAC,IAAI;AACP,YAAM,IAAI,MAAM,0CAA0C;AAAA,IAC3D;AAEA,WAAO;AAAA,EACR;AAEO,WAAS,YAAY,SAAiB,UAAkB,QAA6B;AAC3F,UAAM,QAAQ,OAAO,QAAQ,MAAM,EACjC,IAAI,CAAC,CAAC,KAAK,KAAK,MAChB,CAAC,QAAQ,SACT,UAAU,OAAO,MACjB,GAAG,OAAO,mBAAmB,KAAK,GAAG,EACrC,OAAO,OAAO,EACd,KAAK,GAAG;AAEV,WAAO,GAAG,UAAU,YAAY;AAAA,EACjC;;;AC1BA,MAAM,kBAAkB,KAAK;AAKtB,MAAM,WAAN,MAAe;AAAA,IASrB,YACC,QACA,QACA;AAPD,WAAQ,cAAuB;AAE/B,WAAQ,gBAA+D,CAAC;AAMvE,WAAK,MAAM,OAAO;AAClB,WAAK,cAAc,KAAK,cAAc,KAAK,IAAI;AAE/C,iBAAW,iBAAiB,WAAW,KAAK,WAAW;AACvD,WAAK,UAAU,OAAO;AACtB,WAAK,YAAY,CAAC,CAAC,OAAO;AAAA,IAC3B;AAAA,IAEO,GAA2B,OAAU,IAAkB;AAC7D,YAAM,WAAW,KAAK,YAAY,KAAK;AACvC,eAAS,KAAK,EAAE;AAEhB,aAAO,MAAM,KAAK,IAAI,OAAO,EAAE;AAAA,IAChC;AAAA,IAEO,WAAW,OAAsC,YAA0B,SAAS,UAAkB,iBAA+B;AAC3I,YAAM,SAAS,MAAM,QAAQ,KAAK,IAAI,QAAQ,CAAC,KAAK;AACpD,aAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvC,cAAM,UAAU,CAAC,OAAyB,OAAK;AAC9C,aAAG,CAAC;AACJ,sBAAY,QAAQ,OAAK,EAAE,CAAC;AAAA,QAC7B;AAEA,cAAM,UAAe,QAAQ,OAAO;AACpC,cAAM,QAAa,QAAQ,MAAM;AACjC,cAAM,cAAc,OAAO,IAAI,SAAO,KAAK,GAAG,KAAK,OAAO,CAAC;AAE3D,YAAG,WAAW;AACb,sBAAY,KAAK,KAAK,GAAG,WAAW,KAAK,CAAC;AAAA,QAC3C;AAEA,YAAG,UAAU,GAAG;AACf,gBAAM,QAAQ,WAAW,MAAM;AAC9B,gBAAI,KAAK,aAAa;AAAE;AAAA,YAAQ;AAChC,kBAAM,QAAQ,WAAW;AAAA,UAC1B,GAAG,OAAO;AACV,sBAAY,KAAK,MAAM,aAAa,KAAK,CAAC;AAAA,QAC3C;AAAA,MACD,CAAC;AAAA,IACF;AAAA,IAEO,IAA4B,OAAU,IAAwB;AACpE,YAAM,WAAW,KAAK,YAAY,KAAK;AACvC,YAAM,IAAI,SAAS,QAAQ,EAAE;AAC7B,UAAG,KAAK,GAAG;AACV,iBAAS,OAAO,GAAG,CAAC;AAAA,MACrB;AAAA,IACD;AAAA;AAAA,IAGO,WAAW,CAAC,OAAO,MAAM,MAAS,GAA0E;AAClH,WAAK,aAAa,QAAQ,IAAI,gCAAgC,KAAK;AACnE,WAAK,IAAI,YAAY;AAAA,QACpB,KAAK;AAAA,QACL;AAAA,QACA;AAAA,MACD,GAAG,KAAK,OAAO;AAAA,IAChB;AAAA;AAAA,IAGO,aAAa,KAAa;AAChC,WAAK,IAAI,YAAY;AAAA,QACpB,KAAK;AAAA,QACL,OAAO;AAAA,QACP;AAAA,MACD,GAAG,KAAK,OAAO;AAAA,IAChB;AAAA;AAAA,IAGO,eAAuC,OAAU,MAA0B,QAAiB;AAClG,WAAK,aAAa,OAAO,GAAG;AAAA,IAC7B;AAAA;AAAA,IAGO,eAAe,KAAa,KAAU;AAC5C,WAAK,aAAa,SAAS,EAAE,KAAK,IAAI,CAAC;AAAA,IACxC;AAAA,IAEQ,cAAc,GAAuB;AAC5C,YAAM,OAAO,EAAE,QAAQ,CAAC;AAExB,UAAG,EAAE,WAAW,KAAK,WACpB,KAAK,QAAQ,YACb,CAAC,KAAK,OAAO;AACb,aAAK,aAAa,QAAQ,IAAI,sCAAsC,EAAE,IAAI;AAC1E;AAAA,MACD;AAEA,YAAM,YAAY,KAAK,aAAa,KAAK,UAAU;AAEnD,mBAAa,QAAQ,IAAI,6BAA6B,EAAE,IAAI;AAE5D,WAAK,aAAa,KAAK,OAAO,KAAK,GAAG;AAAA,IACvC;AAAA,IAEQ,aAAa,OAAe,MAAiB;AACpD,YAAM,WAAW,MAAM,KAAK,KAAK,YAAY,KAAK,CAAC;AACnD,eAAS,QAAQ,OAAK,EAAE,IAAI,CAAC;AAAA,IAC9B;AAAA,IACQ,YAAY,OAAiC;AACpD,YAAM,IAAI,KAAK;AACf,UAAG,CAAC,EAAE,KAAK,GAAG;AACb,UAAE,KAAK,IAAI,CAAC;AAAA,MACb;AACA,aAAO,EAAE,KAAK;AAAA,IACf;AAAA,IAEO,UAAgB;AACtB,UAAI,KAAK,aAAa;AAAE;AAAA,MAAQ;AAChC,WAAK,cAAc;AACnB,iBAAW,oBAAoB,WAAW,KAAK,WAAW;AAAA,IAC3D;AAAA,EACD;;;AC/HO,WAAS,UAAU,KAA+B;AACxD,WAAO,IAAI,MAAM,UAAU;AAAA;AAAA;AAAA;AAAA,MAI1B,KAAK;AAAA,MACL,OAAO;AAAA,IACR;AAAA,EACD;AAEA,WAAS,OAAO;AAAA,EAAC;;;ACdV,MAAK,gBAAL,kBAAKA,mBAAL;AAIN,IAAAA,eAAA,aAAU;AAIV,IAAAA,eAAA,eAAY;AAIZ,IAAAA,eAAA,gBAAa;AAIb,IAAAA,eAAA,kBAAe;AAIf,IAAAA,eAAA,eAAY;AAIZ,IAAAA,eAAA,WAAQ;AAxBG,WAAAA;AAAA,KAAA;;;ACAL,MAAK,eAAL,kBAAKC,kBAAL;AACN,IAAAA,cAAA,kBAAe;AACf,IAAAA,cAAA,aAAU;AACV,IAAAA,cAAA,YAAS;AACT,IAAAA,cAAA,eAAY;AACZ,IAAAA,cAAA,aAAU;AACV,IAAAA,cAAA,WAAQ;AACR,IAAAA,cAAA,WAAQ;AAPG,WAAAA;AAAA,KAAA;;;ACAL,MAAK,iBAAL,kBAAKC,oBAAL;AACH,IAAAA,gBAAA,eAAY;AACZ,IAAAA,gBAAA,UAAO;AACP,IAAAA,gBAAA,YAAS;AAHD,WAAAA;AAAA,KAAA;;;ACoDL,MAAK,6BAAL,kBAAKC,gCAAL;AACN,IAAAA,4BAAA,QAAK;AACL,IAAAA,4BAAA,cAAW;AACX,IAAAA,4BAAA,cAAW;AACX,IAAAA,4BAAA,UAAO;AACP,IAAAA,4BAAA,cAAW;AACX,IAAAA,4BAAA,WAAQ;AACR,IAAAA,4BAAA,aAAU;AACV,IAAAA,4BAAA,WAAQ;AARG,WAAAA;AAAA,KAAA;;;ACnDL,MAAK,YAAL,kBAAKC,eAAL;AACN,IAAAA,WAAA,SAAM;AACN,IAAAA,WAAA,kBAAe;AACf,IAAAA,WAAA,wBAAqB;AAHV,WAAAA;AAAA,KAAA;;;ACFL,WAAS,wBAAwB,QAAuC;AAF/E;AAGC,WAAO,QAAQ,QAAQ;AAAA,MACtB,cAAa,YAAO,UAAP,mBAAc;AAAA,IAC5B,CAAC;AAAA,EACF;AAEO,WAAS,uBAAuB,WAAmB,QAAuC;AAChG,UAAM,SAAS,OAAO,MAAM;AAC5B,UAAM,QAAQ,OAAO,MAAM;AAE3B,WAAO,MAAM,GAAG,OAAO,6BAA6B,aAAa;AAAA,MAChE,QAAQ;AAAA,MACR,SAAS;AAAA,QACR,gBAAgB;AAAA,QAChB,oBAAoB;AAAA,MACrB;AAAA,MACA,MAAM;AAAA,gBACQ,UAAU;AAAA;AAAA,IAEzB,CAAC,EACC,KAAK,cAAY;AACjB,UAAI,CAAC,SAAS,IAAI;AACjB,eAAO,QAAQ,OAAO,4BAA4B;AAAA,MACnD;AACA,aAAO,SAAS,KAAK;AAAA,IACtB,CAAC,EACA,KAAK,eAAa;AAAA,MAClB,GAAG;AAAA,MACH;AAAA,IACD,EAAE;AAAA,EACJ;AAEO,WAAS,gBAAgB,QAAuC;AACtE,UAAM,SAAS,OAAO,MAAM;AAC5B,UAAM,MAAM,OAAO,MAAM;AAEzB,UAAM,MAAM,IAAI,IAAI,2BAA2B,OAAO,OAAO;AAC7D,QAAI,aAAa,IAAI,aAAa,GAAG;AAErC,WAAO,MAAM,GAAG,OAAO;AAAA,MACtB,QAAQ;AAAA,MACR,SAAS;AAAA,QACR,UAAU;AAAA,QACV,oBAAoB;AAAA,MACrB;AAAA,IACD,CAAC,EACC,KAAK,cAAY;AACjB,UAAI,CAAC,SAAS,IAAI;AACjB,eAAO,QAAQ,OAAO,4BAA4B;AAAA,MACnD;AACA,aAAO,SAAS,KAAK;AAAA,IACtB,CAAC,EACA,KAAK,eAAa;AAAA,MAClB,GAAG;AAAA,MACH;AAAA,IACD,EAAE;AAAA,EACJ;;;AC9CO,MAAe,cAAf,MAAwF;AAAA,IA0C9F,YACC,IACmB,QACA,WAClB;AAFkB;AACA;AArCpB,WAAQ;AAgBR,WAAQ,oBAAgC,EAAE,SAAS,MAAM;AAuBxD,WAAK,YAAY,KAAK,YAAY,IAAI,KAAK,MAAM;AACjD,WAAK,SAAS,UAAU,KAAK,MAAM;AAAA,IACpC;AAAA;AAAA;AAAA;AAAA,IA5CA,IAAW,eAA6B;AACvC,aAAO,KAAK;AAAA,IACb;AAAA;AAAA;AAAA;AAAA,IAMA,IAAW,SAAiB;AAC3B,aAAO,KAAK;AAAA,IACb;AAAA;AAAA;AAAA;AAAA,IAMA,IAAW,mBAA+B;AACzC,aAAO,KAAK;AAAA,IACb;AAAA,IAGA,IAAW,SAAkB;AAtC9B;AAuCE,aAAO,CAAC,GAAC,UAAK,SAAL,mBAAW;AAAA,IACrB;AAAA,IAEA,IAAW,OAA0B;AACpC,aAAO,KAAK;AAAA,IACb;AAAA;AAAA;AAAA;AAAA,IAsBQ,OAAa;AACpB,WAAK,SAAS,QAAQ,WAAW;AAAA,IAClC;AAAA;AAAA;AAAA;AAAA,IAIO,QAAc;AACpB,WAAK,SAAS,QAAQ,YAAY;AAAA,IACnC;AAAA;AAAA;AAAA;AAAA;AAAA,IAMO,UAAU,QAAsB;AACtC,WAAK,SAAS,QAAQ,aAAa,EAAE,OAAO,CAAC;AAAA,IAC9C;AAAA;AAAA;AAAA;AAAA;AAAA,IAMO,aAAa,WAAuB;AAC1C,WAAK,SAAS,QAAQ,gBAAgB,SAAS;AAAA,IAChD;AAAA;AAAA;AAAA;AAAA;AAAA,IAMO,aAA4B;AAClC,UAAI,KAAK,MAAM;AACd,eAAO,KAAK;AAAA,MACb;AACA,WAAK,SAAS,KAAK,OAAO;AAC1B,WAAK,WAAW,IAAI,SAAS,KAAK,QAAQ,KAAK,MAAM;AACrD,WAAK,gBAAgB;AAErB,YAAM,UAAW,KAAK,OAAO,iBAAkB,OAAS;AAExD,aAAO,KAAK,OAAO,QAAQ,IAAI;AAAA,QAC9B,KAAK,gBAAgB;AAAA,QACrB,KAAK,SAAS,WAAW,QAAQ,SAAS,OAAO;AAAA,MAClD,CAAC,EACC,KAAK,CAAC,CAAC,KAAK,MAAM;AAClB,YAAI,CAAC,OAAO;AACX;AAAA,QACD;AACA,aAAK,OAAO,IAAI,8BAA8B;AAC9C,aAAK,SAAS,QAAQ,iBAAiB,EAAE,MAAM,CAAC;AAChD,aAAK,SAAS,WAAW,eAAe,SAAS,OAAO;AAAA,MACzD,CAAC,EACA,MAAM,SAAO;AACb,aAAK;AACL,aAAK,OAAO,MAAM,gCAAgC,GAAG;AACrD,aAAK,SAAS,aAAa,sBAAsB;AACjD,aAAK,SAAS,eAAe,+BAA+B,GAAG;AAC/D,eAAO,QAAQ,OAAO,GAAG;AAAA,MAC1B,CAAC;AAAA,IACH;AAAA,IAEU,kBAAgC;AACzC,UAAI,CAAC,KAAK,OAAO,OAAO;AACvB,eAAO,QAAQ,QAAQ;AAAA,MACxB;AAEA,cAAQ,KAAK,OAAO,MAAM,MAAM;AAAA,QAC/B;AACC,iBAAO,wBAAwB,KAAK,MAAM;AAAA,QAC3C;AACC,iBAAO,gBAAgB,KAAK,MAAM;AAAA,QACnC;AACC,iBAAO,QAAQ,OAAO,wBAAwB;AAAA,MAChD;AAAA,IACD;AAAA,IACU,kBAAwB;AACjC,WAAK,SAAS,GAAG,eAAe,CAAC,MAAW;AAC3C,aAAK,QAAQ;AACb,aAAK;AAAA,MACN,CAAC;AAED,WAAK,SAAS,GAAG,iBAAiB,CAAC,EAAC,QAAQ,GAAG,KAAI,MAAW;AAC7D,aAAK,QAAQ;AAAA,MACd,CAAC;AAED,WAAK,SAAS,GAAG,uBAAuB,OAAK,KAAK,gBAAgB,EAAE,MAAM;AAC1E,WAAK,SAAS,GAAG,oBAAoB,eAAa;AACjD,aAAK,oBAAoB;AAAA,MAC1B,CAAC;AAGD,UAAI,KAAK,OAAO,iBAAiB,UAAa,SAAS,KAAK,OAAO,aAAa,GAAG;AAClF,cAAM,iBAAmD,CAAC,QAAQ;AACjE,cAAI,IAAI,oCAAiC;AACxC;AAAA,UACD;AACA,eAAK,SAAS,IAAI,uBAAuB,cAAc;AACvD,eAAK,UAAU,KAAK,OAAO,aAAa;AAAA,QACzC;AACA,aAAK,SAAS,GAAG,uBAAuB,cAAc;AAAA,MACvD;AAAA,IACD;AAAA,IAGO,GAA2B,OAAU,UAA8B;AAEzE,WAAK,SAAS,GAAQ,OAAO,CAAC,MAAW,WAAW,MAAM,SAAS,CAAC,CAAC,CAAC;AAAA,IACvE;AAAA,IAEO,IAA4B,OAAU,UAA8B;AAC1E,WAAK,SAAS,IAAI,OAAO,QAAQ;AAAA,IAClC;AAAA,IAEQ,SAA4B;AACnC,YAAM,SAAS,SAAS,cAAc,QAAQ;AAC9C,aAAO,aAAa,eAAe,GAAG;AACtC,aAAO,aAAa,mBAAmB,EAAE;AACzC,aAAO,QAAQ;AACf,aAAO,QAAQ,KAAK,OAAO,SAAS;AACpC,aAAO,SAAS,KAAK,OAAO,UAAU;AACtC,aAAO,MAAM,KAAK;AAElB,UAAI,KAAK,OAAO,WAAW;AAC1B,eAAO,YAAY,KAAK,OAAO;AAAA,MAChC;AAEA,WAAK,UAAU,YAAY,MAAM;AAEjC,aAAO;AAAA,IACR;AAAA,IAEO,UAAgB;AArMxB;AAsME,WAAK,OAAO,OAAO;AACnB,WAAK,SAAS,QAAQ;AACtB,WAAK,OAAO;AACZ,iBAAK,iBAAL,mBAAmB,QAAQ,QAAM,GAAG;AAAA,IACrC;AAAA,IAEA,MAAa,YAAY,UAAyC;AACjE,WAAK,OAAO,QAAQ;AACpB,UAAI;AACH,cAAM,QAAQ,MAAM,KAAK,gBAAgB;AACzC,aAAK,SAAS,QAAQ,eAAe,EAAE,MAAM,CAAC;AAC9C,cAAM,KAAK,SAAS,WAAW,eAAe,OAAO;AAAA,MACtD,SAAS,OAAP;AACD,aAAK,OAAO,MAAM,0BAA0B,KAAK;AACjD,cAAM;AAAA,MACP;AAAA,IACD;AAAA,EACD;AAMQ,WAAS,cAAc,QAAkF;AAChH,WAAO;AAAA,MACN,IAAI,CAAC,CAAC,OAAO;AAAA,MACb,WAAY,OAAO,aAAa,UAE5B,CAAC,CAAC,OAAO,WAAW,SAAS,IAC9B;AAAA,MACH,QAAQ,OAAO,eAAe,OAAO;AAAA,MACrC,UAAU,OAAO;AAAA,MACjB,cAAc,OAAO;AAAA,MACrB,gBAAgB,OAAO;AAAA,MACvB,YAAY,OAAO;AAAA,MACnB,wBAAwB,OAAO;AAAA,MAC/B,qBAAqB,OAAO,kBAAkB,OAAO;AAAA,MACrD,WAAW,OAAO,cAAc,OAAO;AAAA,MACvC,MAAM,OAAO,iBAAiB,OAAO;AAAA,MACrC,iBAAiB,OAAO,uBAAuB,OAAO;AAAA,MACtD,YAAY,OAAO,gBAAgB,OAAO;AAAA,MAC1C,cAAc,OAAO,kBAAkB,OAAO;AAAA,MAC9C,WAAW,OAAO,oBAAoB,OAAO;AAAA,MAC7C,YAAY,OAAO,gBAAgB,OAAO;AAAA,MAC1C,oBAAoB,OAAO;AAAA,MAC3B,SAAS,OAAO;AAAA,IACjB;AAAA,EACD;;;AC5OO,MAAM,mBAAN,cAA+B,YAAqD;AAAA,IAyB1F,YACC,IACA,QACA,WACC;AACD,YAAM,IAAI,QAAQ,SAAS;AAAA,IAC5B;AAAA;AAAA;AAAA;AAAA,IA1BA,IAAW,cAAsB;AAChC,aAAO,KAAK;AAAA,IACb;AAAA;AAAA;AAAA;AAAA,IAMA,IAAW,WAA+B;AAtB3C;AAuBE,cAAO,UAAK,SAAL,mBAAW;AAAA,IACnB;AAAA;AAAA;AAAA;AAAA;AAAA,IAMA,IAAW,YAAoC;AAC9C,aAAO,KAAK;AAAA,IACb;AAAA;AAAA;AAAA;AAAA;AAAA,IAcO,iBAAiB,OAAqB;AAC5C,UAAI,KAAK,QAAQ;AAChB,aAAK,OAAO,IAAI,iCAAiC;AACjD;AAAA,MACD;AACA,WAAK,SAAS,QAAQ,oBAAoB,EAAE,MAAM,CAAC;AAAA,IACpD;AAAA;AAAA;AAAA;AAAA;AAAA,IAMO,KAAK,aAAqB;AAChC,UAAI,KAAK,QAAQ;AAChB,aAAK,OAAO,IAAI,kBAAkB;AAClC;AAAA,MACD;AACA,WAAK,SAAS,QAAQ,QAAQ,EAAE,YAAY,CAAC;AAAA,IAC9C;AAAA,IAEU,kBAAwB;AACjC,YAAM,gBAAgB;AACtB,WAAK,SAAS,GAAG,eAAe,OAAK;AACpC,aAAK,eAAe,EAAE;AAAA,MAEvB,CAAC;AAAA,IACF;AAAA,IACU,YAAY,IAAY,QAAmC;AACpE,aAAO,YAAY,OAAO,SAAS,UAAU;AAAA,QAC5C;AAAA,QACA,GAAG,cAAc,MAAM;AAAA,MACxB,CAAC;AAAA,IACF;AAAA,EACD;;;ACvEA,WAAS,qBAAqB,QAAkC;AAC/D,WAAO,OAAO,mBAAmB,OAAO;AAAA,EACzC;AAEO,MAAM,qBAAN,cAAiC,YAAyD;AAAA,IAOhG,YACkB,WACjB,QACA,WACC;AACD,YAAM,WAAW,QAAQ,SAAS;AAJjB;AAHlB,WAAQ;AAAA,IAQR;AAAA,IAXA,IAAW,gBAAgB;AAC1B,aAAO,KAAK;AAAA,IACb;AAAA,IAWU,kBAA2C;AACpD,YAAM,EAAC,MAAM,OAAM,IAAI,KAAK,OAAO,SAAS,CAAC;AAE7C,UAAI,yDAA0C,4BAA0B,WAAW,cAAe;AACjG,eAAO,uBAAuB,KAAK,WAAW,KAAK,MAAM;AAAA,MAC1D;AAEA,aAAO,MAAM,gBAAgB;AAAA,IAC9B;AAAA,IAEA,MAAgB,kBAAiC;AAChD,YAAM,gBAAgB;AAEtB,MAAQ,CAAC,kBAAkB,oBAAoB,oBAAoB,cAAc,EAAG,QAAQ,WAAS;AACpG,aAAK,SAAS,GAAG,OAAO,UAAQ,KAAK,iBAAiB,KAAK,MAAM;AAAA,MAClE,CAAC;AAED,WAAK,SAAS,GAAG,iBAAiB,OAAK;AACtC,aAAK,iBAAiB,EAAE;AAExB,YAAI,qBAAqB,KAAK,MAAM,GAAG;AACtC,eAAK,aAAa,EAAE,OAAO,MAAM,cAAc,MAAM,CAAC;AAAA,QACvD;AAAA,MACD,CAAC;AAED,WAAK,SAAS,GAAG,eAAe,MAAM;AACrC,aAAK;AAAA,MACN,CAAC;AAAA,IACF;AAAA,IAEO,aAAa,QAAwB;AAC3C,WAAK,SAAS,QAAQ,gBAAgB,MAAM;AAAA,IAC7C;AAAA,IACU,YAAY,IAAY,QAAmC;AACpE,aAAO,YAAY,OAAO,SAAS,kBAAkB,MAAM;AAAA,QAC1D,eAAe,qBAAqB,MAAM;AAAA,QAC1C,GAAG,cAAc,MAAM;AAAA,MACxB,CAAC;AAAA,IACF;AAAA,EACD;;;AC5DO,MAAM,sBAAN,cAAkC,iBAAiD;AAAA,IAWtF,YACI,IACA,QACA,WACF;AACE,YAAM,IAAI,QAAQ,SAAS;AAP/B,WAAQ,SAAiB;AAAA,IAQzB;AAAA,IAhBA,IAAW,WAA0B;AACjC,aAAO,KAAK;AAAA,IAChB;AAAA,IAGA,IAAW,eAAuB;AAC9B,aAAO,KAAK;AAAA,IAChB;AAAA,IAWU,kBAAwB;AAC9B,YAAM,gBAAgB;AACtB,WAAK,SAAS,GAAG,kBAAkB,cAAY;AA3BvD;AA4BY,aAAK,YAAY;AACjB,aAAI,UAAK,SAAL,mBAAW,SAAS;AACpB,eAAK,SAAS,iBAAiB,KAAK,WAAU,UAAK,SAAL,mBAAW,OAAO,KAAK;AAAA,QACzE;AAAA,MACJ,CAAC;AACD,WAAK,SAAS,GAAG,eAAe,WAAS;AAjCjD;AAmCY,YAAI,GAAC,UAAK,aAAL,mBAAe,SAAQ;AAAE;AAAA,QAAQ;AACtC,aAAK,SAAS,iBAAiB,KAAK,UAAU,MAAM,OAAO,KAAK;AAChE,aAAK,SAAS,eAAe,gBAAgB;AAAA,UACzC,OAAO,KAAK;AAAA,UACZ,SAAS,KAAK,SAAS,OAAO,KAAK,MAAM,EAAE;AAAA,QAC/C,CAAC;AAAA,MACL,CAAC;AAAA,IACL;AAAA,IAEO,WAAW;AACd,YAAM,MAAM,OAAO,KAAK,SAAS,QAAQ,KAAK,SAAS,CAAC;AACxD,WAAK,YAAY,IAAI,IAAI,IAAI;AAAA,IACjC;AAAA,IAEO,OAAO;AACV,YAAM,MAAM,OAAO,KAAK,SAAS,QAAQ,KAAK,SAAS,CAAC;AACxD,WAAK,YAAY,IAAI,IAAI,IAAI;AAAA,IACjC;AAAA,IAEA,YAAY,SAAkB,UAAsC;AAChE,WAAK,SAAS,QAAQ,eAAe,EAAE,SAAS,SAAS,CAAC;AAAA,IAC9D;AAAA,IAEU,YAAY,IAAY,QAA2C;AACzE,aAAO,YAAY,OAAO,SAAS,UAAU;AAAA,QACzC,UAAU;AAAA,QACV,QAAQ,OAAO;AAAA,QACf,WAAW,OAAO;AAAA,QAClB,QAAQ,OAAO;AAAA,QACf,WAAW,OAAO;AAAA,QAClB,GAAG,cAAc,MAAM;AAAA,MAC3B,CAAC;AAAA,IACL;AAAA,EACJ;AAQA,WAAS,iBAAiB,UAAyB,SAAqC;AACpF,UAAM,MAAM,SAAS,OAAO,UAAU,CAAC,EAAE,GAAG,MAAM,OAAO,OAAO;AAChE,WAAO,OAAO,IAAI,MAAM;AAAA,EAC5B;AAQA,WAAS,OAAU,KAAU,GAAc;AACvC,UAAM,IAAI,IAAI;AACjB,WAAO,KAAM,IAAI,IAAK,KAAK,CAAC;AAAA,EAC7B;;;ACxFO,WAAS,cAA+C,eAAiC;AAC/F,UAAM,MAAM;AAAA,MACX,GAAG;AAAA,IACJ;AACA,mBAAe,GAAG;AAClB,WAAO;AAAA,EACR;AAEA,WAAS,eAAe,KAA4B;AAVpD;AAWC,QAAG,GAAC,SAAI,YAAJ,mBAAa,MAAM,kBAAiB;AACvC,YAAM,IAAI,MAAM,gCAAgC;AAAA,IACjD;AACA,QAAI,UAAU,IAAI,IAAI,IAAI,OAAO,EAAE;AAAA,EACpC;;;ACIO,WAAS,WACf,SACA,SACA,QACoB;AACpB,UAAM,KAAK,cAAc,OAAO;AAChC,UAAM,MAAM,cAAc,MAAM;AAEhC,UAAM,QAAQ,IAAI,iBAAiB,SAAS,KAAK,EAAE;AACnD,UAAM,WAAW,EAAE,MAAM,MAAM;AAAA,IAAC,CAAC;AACjC,WAAO;AAAA,EACR;AAwBO,WAAS,aACf,SACA,WACA,QACsB;AAEtB,UAAM,KAAK,cAAc,OAAO;AAChC,UAAM,MAAM,cAAc,MAAM;AAEhC,UAAM,UAAU,IAAI,mBAAmB,WAAW,KAAK,EAAE;AACzD,YAAQ,WAAW,EAAE,MAAM,MAAM;AAAA,IAAC,CAAC;AACnC,WAAO;AAAA,EACR;AAuBO,WAAS,cACf,SACA,YACA,QACuB;AAEvB,UAAM,KAAK,cAAc,OAAO;AAChC,UAAM,MAAM,cAAc,MAAM;AAEhC,UAAM,SAAS,IAAI,oBAAoB,YAAY,KAAK,EAAE;AAC1D,WAAO,WAAW,EAAE,MAAM,MAAM;AAAA,IAAC,CAAC;AAClC,WAAO;AAAA,EACR;;;AfpFA,MAAM,SAAS;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AAEA,MAAO,cAAQ;","names":["WebcastStatus","PlayerStatus","PlaylistLayout","VideoPlaybackSidebarButton","TokenType"]}